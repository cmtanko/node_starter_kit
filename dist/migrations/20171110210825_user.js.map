{"version":3,"sources":["../../src/migrations/20171110210825_user.js"],"names":["exports","up","knex","schema","createTable","tbl","increments","string","notNullable","defaultTo","date","raw","integer","references","inTable","onDelete","boolean","down","dropTableIfExists"],"mappings":"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","file":"20171110210825_user.js","sourcesContent":["exports.up = function(knex) {\n  return (\n    knex.schema\n      // <country>\n      .createTable('country', function(tbl) {\n        // PK\n        tbl.increments('id');\n\n        tbl\n          .string('country', 20)\n          .notNullable()\n          .defaultTo('n/a');\n        tbl\n          .date('last_update')\n          .notNullable()\n          .defaultTo(knex.raw('now()'));\n      })\n      // <city>\n      .createTable('city', function(tbl) {\n        // PK\n        tbl.increments('id');\n\n        tbl\n          .string('city', 45)\n          .notNullable()\n          .defaultTo('n/a');\n        tbl\n          .integer('country_id')\n          .notNullable()\n          .references('id')\n          .inTable('country')\n          .onDelete('CASCADE');\n        tbl\n          .date('last_update')\n          .notNullable()\n          .defaultTo(knex.raw('now()'));\n      })\n      // <address>\n      .createTable('address', function(tbl) {\n        // PK\n        tbl.increments('id');\n\n        tbl\n          .string('address', 45)\n          .notNullable()\n          .defaultTo('n/a');\n        tbl.string('address2', 50);\n        tbl.string('district', 50);\n        tbl.string('phone', 50).notNullable();\n        tbl\n          .integer('city_id')\n          .notNullable()\n          .references('id')\n          .inTable('city')\n          .onDelete('CASCADE');\n        tbl.string('postal_code', 10);\n        tbl\n          .date('create_date')\n          .notNullable()\n          .defaultTo(knex.raw('now()'));\n        tbl\n          .date('last_update')\n          .notNullable()\n          .defaultTo(knex.raw('now()'));\n      })\n      // <user>\n      .createTable('user', function(tbl) {\n        // PK\n        tbl.increments('id');\n\n        tbl\n          .string('first_name', 45)\n          .notNullable()\n          .defaultTo('n/a');\n        tbl\n          .string('last_name', 45)\n          .notNullable()\n          .defaultTo('n/a');\n        tbl.string('email', 50);\n        tbl\n          .integer('address_id')\n          .notNullable()\n          .references('id')\n          .inTable('address')\n          .onDelete('CASCADE');\n        tbl\n          .boolean('activebool')\n          .notNullable()\n          .defaultTo(true);\n        tbl\n          .date('create_date')\n          .notNullable()\n          .defaultTo(knex.raw('now()'));\n        tbl\n          .date('last_update')\n          .notNullable()\n          .defaultTo(knex.raw('now()'));\n      })\n  );\n};\n\nexports.down = function(knex) {\n  return knex.schema\n    .dropTableIfExists('country')\n    .dropTableIfExists('city')\n    .dropTableIfExists('address')\n    .dropTableIfExists('user');\n};\n"]}